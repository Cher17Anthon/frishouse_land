var AjaxForm={initialize:function(e){var t;jQuery().ajaxForm||((t=document.createElement("script")).src=e.assetsUrl+"js/lib/jquery.form.min.js",document.body.appendChild(t));var r=function(){$.jGrowl.defaults.closerTemplate="<div>[ "+e.closeMessage+" ]</div>"};jQuery().jGrowl?$(document).ready((function(){r()})):((t=document.createElement("script")).src=e.assetsUrl+"js/lib/jquery.jgrowl.min.js",t.onload=r,document.body.appendChild(t)),$(document).off("submit",e.formSelector).on("submit",e.formSelector,(function(t){var r=void 0;return $(this).ajaxSubmit({dataType:"json",data:{pageId:e.pageId},url:e.actionUrl,beforeSerialize:function(e){t.originalEvent.submitter&&(r=$(t.originalEvent.submitter)).each((function(){var t=$(this);t.attr("name")&&(e.find('input[type="hidden"][name="'+t.attr("name")+'"]').length||$(e).append($('<input type="hidden">').attr({name:t.attr("name"),value:t.attr("value")})))}))},beforeSubmit:function(e,t){return("undefined"==typeof afValidated||0!=afValidated)&&(t.find(".error").html(""),t.find(".error").removeClass("error"),t.find("input,textarea,select,button").attr("disabled",!0),!0)},success:function(t,a,n,o){if(o.find("input,textarea,select,button").attr("disabled",!1),t.form=o,$(document).trigger("af_complete",t),r&&r.length&&(r.each((function(){var e=$(this);if(!e.attr("name"))return;let t=o.find('input[type="hidden"][name="'+e.attr("name")+'"]');t.length&&t.remove()})),r=void 0),t.success){try{var s=o.find('input[name*="name"]').val(),i=o.find('input[name*="phone"],input[name*="tel"]').val(),l=o.find('input[name*="email"]').val(),c={fio:s,phoneNumber:i,email:l,subject:"Заявка с "+location.hostname,requestUrl:location.href,sessionId:window.call_value};(i||l)&&jQuery.ajax({url:"https://api.calltouch.ru/calls-service/RestAPI/requests/56373/register/",dataType:"json",type:"POST",data:c,async:!1})}catch(e){console.log(e)}UIkit.modal("#modal-success").show(),o.find(".error").removeClass("error"),e.clearFieldsOnSuccess&&o[0].reset(),"undefined"!=typeof grecaptcha&&grecaptcha.reset()}else{var d,u,m;if(AjaxForm.Message.error(t.message),t.data)for(d in t.data)t.data.hasOwnProperty(d)&&(m||(o.find('[name="'+d+'"]').focus(),m=!0),u=t.data[d],o.find(".error_"+d).html(u).addClass("error"),o.find('[name="'+d+'"]').addClass("error"))}}}),t.preventDefault(),!1})),$(document).on("keypress change",".error",(function(){var e=$(this).attr("name");$(this).removeClass("error"),$(".error_"+e).html("").removeClass("error")})),$(document).on("reset",e.formSelector,(function(){$(this).find(".error").html(""),AjaxForm.Message.close()}))}};AjaxForm.Message={success:function(e,t){e&&(t||(t=!1),$.jGrowl(e,{theme:"af-message-success",sticky:t}))},error:function(e,t){e&&(t||(t=!1),$.jGrowl(e,{theme:"af-message-error",sticky:t}))},info:function(e,t){e&&(t||(t=!1),$.jGrowl(e,{theme:"af-message-info",sticky:t}))},close:function(){$.jGrowl("close")}};